<%= turbo_stream.append "posts" do %>
  <% @posts.each do |post| %>
    <%= render 'post', post: post %>
  <% end %>
<% end %>

<%= turbo_stream.update "pagination" do %>
  <% if @pagy.next %>
    <div id="pagination" class="my-4" data-controller="infinite-scroll" data-infinite-scroll-target="pagination" data-infinite-scroll-url-value="<%= root_path(tab: @tab, format: :turbo_stream, page: @pagy.next, load_more: true) if @pagy.next %>">
      <div class="flex justify-center">
        <button class="px-4 py-2 bg-blue-600 text-white rounded-full text-sm font-medium hover:bg-blue-700 transition">
          Loading more posts...
        </button>
      </div>
    </div>
  <% else %>
    <div id="pagination"></div>
  <% end %>
<% end %>