<div class="min-h-screen bg-black text-white">
  <!-- Sticky Search Bar -->
  <div class="sticky top-0 z-10 bg-black border-b border-gray-800 p-4">
    <%= form_with url: search_path, method: :get, local: true, class: "w-full max-w-2xl mx-auto" do |form| %>
      <div class="relative">
        <%= form.text_field :q, 
            value: @query, 
            placeholder: "Ara...", 
            class: "w-full px-4 py-3 bg-gray-900 border border-gray-700 rounded-full text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",
            data: { 
              controller: "autocomplete",
              autocomplete_url_value: search_path,
              action: "input->autocomplete#search keydown->autocomplete#handleKeydown"
            } %>
        <div data-autocomplete-target="results" class="absolute top-full left-0 right-0 bg-gray-900 border border-gray-700 rounded-lg mt-1 hidden z-50 max-h-60 overflow-y-auto"></div>
      </div>
    <% end %>
  </div>

  <div class="max-w-2xl mx-auto">
    <% if @query.present? %>
      <!-- Search Query Display -->
      <div class="px-4 py-2 border-b border-gray-800">
        <h2 class="text-xl font-bold text-white">
          "<%= @query %>" için sonuçlar
        </h2>
      </div>

      <!-- Tab Navigation -->
      <div class="border-b border-gray-800">
        <nav class="flex">
          <%= link_to search_path(q: @query, tab: 'posts'), 
              class: "flex-1 px-4 py-3 text-center font-medium border-b-2 #{'border-blue-500 text-blue-400' if @tab == 'posts'} #{'border-transparent text-gray-400 hover:text-white' unless @tab == 'posts'}" do %>
            Gönderiler
          <% end %>
          <%= link_to search_path(q: @query, tab: 'top'), 
              class: "flex-1 px-4 py-3 text-center font-medium border-b-2 #{'border-blue-500 text-blue-400' if @tab == 'top'} #{'border-transparent text-gray-400 hover:text-white' unless @tab == 'top'}" do %>
            Popüler
          <% end %>
          <%= link_to search_path(q: @query, tab: 'latest'), 
              class: "flex-1 px-4 py-3 text-center font-medium border-b-2 #{'border-blue-500 text-blue-400' if @tab == 'latest'} #{'border-transparent text-gray-400 hover:text-white' unless @tab == 'latest'}" do %>
            Güncel
          <% end %>
          <%= link_to search_path(q: @query, tab: 'people'), 
              class: "flex-1 px-4 py-3 text-center font-medium border-b-2 #{'border-blue-500 text-blue-400' if @tab == 'people'} #{'border-transparent text-gray-400 hover:text-white' unless @tab == 'people'}" do %>
            Kişiler
          <% end %>
        </nav>
      </div>

      <!-- Content Area -->
      <div class="divide-y divide-gray-800">
        <% if @tab == 'people' %>
          <!-- People Results -->
          <% if @users&.any? %>
            <% @users.each do |user| %>
              <div class="p-4 hover:bg-gray-900 transition-colors">
                <%= render 'shared/user_card', user: user %>
              </div>
            <% end %>
          <% else %>
            <div class="p-8 text-center text-gray-400">
              "<%= @query %>" ile ilgili kullanıcı bulunamadı.
            </div>
          <% end %>
        <% else %>
          <!-- Posts Results -->
          <% if @posts&.any? %>
            <% @posts.each do |post| %>
              <div class="border-b border-gray-800 last:border-b-0">
                <%= render 'posts/post', post: post %>
              </div>
            <% end %>
          <% else %>
            <div class="p-8 text-center text-gray-400">
              "<%= @query %>" ile ilgili gönderi bulunamadı.
            </div>
          <% end %>
        <% end %>
      </div>
    <% else %>
      <!-- Empty State -->
      <div class="p-8 text-center text-gray-400">
        <h3 class="text-lg font-medium mb-2">Arama yapın</h3>
        <p>Gönderileri ve kişileri aramak için yukarıdaki arama çubuğunu kullanın.</p>
      </div>
    <% end %>
  </div>
</div>
